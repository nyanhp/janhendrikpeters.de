
name: Publish content
on:
    push:
      branches:
        - main
jobs:
    build:
        runs-on: ubuntu-latest
        name: Build static content
        steps:            
            - uses: actions/checkout@v3
            - run: hugo
    publish:
        name: Deploy
        runs-on: ubuntu-latest
        steps:
        - name: "Deploy"
          uses: milanmk/actions-file-deployer@master
          with:
            remote-protocol: "sftp"
            remote-host: ${{ secrets.sftp }}
            remote-user: ${{ secrets.user }}
            remote-password: ${{ secrets.password }}
            remote-path: /janhendrikpetersde
            local-path: ./public
            sync: full
            proxy: false